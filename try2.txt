[HttpPost]
[ValidateAntiForgeryToken]
public IActionResult ToggleStatus(int id)
{
    // Récupérez la criticité à partir de la base de données
    var criticite = _context.Criticites.FirstOrDefault(c => c.CriticiteId == id);

    if (criticite != null)
    {
        // Basculez le statut
        criticite.Statut = criticite.Statut == "Actif" ? "Inactif" : "Actif";

        // Enregistrez les changements
        _context.SaveChanges();
    }

    // Rechargez la page (ou redirigez selon vos besoins)
    return RedirectToAction(nameof(Index));
}


<table class="table table">
    <thead>
        <tr>
            <th class="bg-black text-white">Nom de Criticité</th>
            <th class="bg-black text-white">BADGE</th>
            <th class="bg-black text-white">Descriptions</th>
            <th class="bg-black text-white">Statut</th>
            <th class="bg-black text-white">Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var criticite in Model)
        {
        <tr>
            <td>@criticite.CriticiteNom</td>
            <td>
                <span class="badge text-black" style="background-color: @(criticite.Couleur ?? "gray");">
                    @(criticite.CriticiteNom?.ToUpper() ?? "N/A")
                </span>
            </td>
            <td>
                @if (criticite.Descriptions.Length > 50)
                {
                    @criticite.Descriptions.Substring(0, 50)
                }
                else
                {
                    @criticite.Descriptions
                }
            </td>
            <td>
                <form method="post" asp-action="ToggleStatus">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="id" value="@criticite.CriticiteId" />
                    <label class="switch">
                        <input type="checkbox" 
                               name="statut" 
                               onchange="this.form.submit()" 
                               @(criticite.Statut == "Actif" ? "checked" : "") />
                        <span class="slider"></span>
                    </label>
                </form>
            </td>
            <td>
                <a asp-action="Details" asp-route-id="@criticite.CriticiteId" class="btn btn-black" title="Détails">
                    <i class="fas fa-list"></i>
                </a>
                <a asp-action="EditCriticite" asp-route-id="@criticite.CriticiteId" class="btn btn-warning" title="Modifier">
                    <i class="fas fa-edit"></i>
                </a>
            </td>
        </tr>
        }
    </tbody>
</table>

.switch {
    position: relative;
    display: inline-block;
    width: 34px;
    height: 20px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: #4CAF50;
}

input:checked + .slider:before {
    transform: translateX(14px);
}



